/*
 * artTemplate - Template Engine
 * https://github.com/aui/artTemplate
 * Released under the MIT, BSD, and GPL Licenses
 */
var template=function(b,a){return template[typeof a==="object"?"render":"compile"].apply(template,arguments)};(function(a,c){a.version="2.0.1";a.openTag="<%";a.closeTag="%>";a.isEscape=true;a.isCompress=false;a.parser=null;a.render=function(i,h){var g=f(i);if(g===undefined){return d({id:i,name:"Render Error",message:"No Template"})}return g(h)};a.compile=function(n,k){var m=arguments;var h=m[2];var j="anonymous";if(typeof k!=="string"){h=m[1];k=m[0];n=j}try{var g=b(k,h)}catch(l){l.id=n||k;l.name="Syntax Error";return d(l)}function i(o){try{return new g(o)+""}catch(p){if(!h){return a.compile(n,k,true)(o)}p.id=n||k;p.name="Render Error";p.source=k;return d(p)}}i.prototype=g.prototype;i.toString=function(){return g.toString()};if(n!==j){e[n]=i}return i};a.helper=function(g,h){a.prototype[g]=h};a.onerror=function(h){var g="[template]:\n"+h.id+"\n\n[name]:\n"+h.name;if(h.message){g+="\n\n[message]:\n"+h.message}if(h.line){g+="\n\n[line]:\n"+h.line;g+="\n\n[source]:\n"+h.source.split(/\n/)[h.line-1].replace(/^[\s\t]+/,"")}if(h.temp){g+="\n\n[temp]:\n"+h.temp}if(c.console){console.error(g)}};var e={};var f=function(j){var g=e[j];if(g===undefined&&"document" in c){var h=document.getElementById(j);if(h){var i=h.value||h.innerHTML;return a.compile(j,i.replace(/^\s*|\s*$/g,""))}}else{if(e.hasOwnProperty(j)){return g}}};var d=function(h){a.onerror(h);function g(){return g+""}g.toString=function(){return"{Template Error}"};return g};var b=(function(){a.prototype={$render:a.render,$escape:function(p){return typeof p==="string"?p.replace(/&(?![\w#]+;)|[<>"']/g,function(q){return{"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"}[q]}):p},$string:function(p){if(typeof p==="string"||typeof p==="number"){return p}else{if(typeof p==="function"){return p()}else{return""}}}};var n=Array.prototype.forEach||function(s,q){var p=this.length>>>0;for(var r=0;r<p;r++){if(r in this){s.call(q,this[r],r,this)}}};var i=function(q,p){n.call(q,p)};var l="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined";var k=/\/\*(?:.|\n)*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|'[^']*'|"[^"]*"|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g;var m=/[^\w$]+/g;var g=new RegExp(["\\b"+l.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var h=/\b\d[^,]*/g;var j=/^,+|,+$/g;var o=function(p){p=p.replace(k,"").replace(m,",").replace(g,"").replace(h,"").replace(j,"");p=p?p.split(/,+/):[];return p};return function(E,G){var C=a.openTag;var x=a.closeTag;var t=a.parser;var q=E;var s="";var z=1;var D={$data:true,$helpers:true,$out:true,$line:true};var F=a.prototype;var B={};var w="var $helpers=this,"+(G?"$line=0,":"");var J="".trim;var L=J?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"];var v=J?"if(content!==undefined){$out+=content;return content}":"$out.push(content);";var u="function(content){"+v+"}";var p="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+v+"}";i(q.split(C),function(P,O){P=P.split(x);var N=P[0];var M=P[1];if(P.length===1){s+=y(N)}else{s+=H(N);if(M){s+=y(M)}}});q=s;if(G){q="try{"+q+"}catch(e){e.line=$line;throw e}"}q="'use strict';"+w+L[0]+q+"return new String("+L[3]+")";try{var K=new Function("$data",q);K.prototype=B;return K}catch(I){I.temp="function anonymous($data) {"+q+"}";throw I}function y(M){z+=M.split(/\n/).length-1;if(a.isCompress){M=M.replace(/[\n\r\t\s]+/g," ")}M=M.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n");M=L[1]+"'"+M+"'"+L[2];return M+"\n"}function H(O){var P=z;if(t){O=t(O)}else{if(G){O=O.replace(/\n/g,function(){z++;return"$line="+z+";"})}}if(O.indexOf("=")===0){var N=O.indexOf("==")!==0;O=O.replace(/^=*|[\s;]*$/g,"");if(N&&a.isEscape){var M=O.replace(/\s*\([^\)]+\)/,"");if(!F.hasOwnProperty(M)&&!/^(include|print)$/.test(M)){O="$escape($string("+O+"))"}}else{O="$string("+O+")"}O=L[1]+O+L[2]}if(G){O="$line="+P+";"+O}A(O);return O+"\n"}function A(M){M=o(M);i(M,function(N){if(!D.hasOwnProperty(N)){r(N);D[N]=true}})}function r(M){var N;if(M==="print"){N=u}else{if(M==="include"){B["$render"]=F["$render"];N=p}else{N="$data."+M;if(F.hasOwnProperty(M)){B[M]=F[M];if(M.indexOf("$")===0){N="$helpers."+M}else{N=N+"===undefined?$helpers."+M+":"+N}}}}w+=M+"="+N+","}}})()})(template,this);if(typeof define==="function"){define(function(b,a,c){c.exports=template})}else{if(typeof exports!=="undefined"){module.exports=template}};